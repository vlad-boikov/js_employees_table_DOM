{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","persons","rows","options","trimmer","sal","replace","cleaner","coll","attr","removeAttribute","addEventListener","e","target","tagName","dataset","sorted","sort","a","b","innerText","children","cellIndex","localeCompare","querySelectorAll","append","toSelect","parentElement","classList","remove","className","form","createElement","add","body","insertAdjacentHTML","pushNotification","title","description","type","element","elTitle","elPar","qa","innerHTML","setTimeout","inputs","button","nameField","position","office","age","salary","notification","preventDefault","contains","value","length","isNaN","toLocaleString","push","cellText","textContent","newInput","firstChild","replaceWith","checker","ev","code"],"mappings":"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","file":"main.2810c2e7.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('tbody');\nconst persons = [...table.rows];\nconst options = `\n<option value=\"Tokyo\">Tokyo</option>\n<option value=\"Singapore\">Singapore</option>\n<option value=\"London\">London</option>\n<option value=\"New York\">New York</option>\n<option value=\"Edinburgh\">Edinburgh</option>\n<option value=\"San Francisco\">San Francisco</option>`;\n\n// sorting\n\nfunction trimmer(sal) {\n  return sal.replace(/\\D/g, '');\n};\n\nfunction cleaner(coll, attr) {\n  for (const th of coll) {\n    th.removeAttribute(attr);\n  };\n}\n\ndocument.addEventListener('click', e => {\n  const target = e.target;\n\n  if (target.tagName !== 'TH') {\n    return;\n  }\n\n  if (!target.dataset.sorted || target.dataset.sorted === 'DESC') {\n    persons.sort((a, b) => {\n      switch (target.innerText) {\n        case 'Age':\n          return +a.children[target.cellIndex].innerText\n            - +b.children[target.cellIndex].innerText;\n\n        case 'Salary':\n          return trimmer(a.children[target.cellIndex].innerText)\n            - trimmer(b.children[target.cellIndex].innerText);\n\n        default:\n          return a.children[target.cellIndex].innerText\n            .localeCompare(b.children[target.cellIndex].innerText);\n      };\n    });\n\n    cleaner(document.querySelectorAll('th'), 'data-sorted');\n\n    target.dataset.sorted = 'ASC';\n  } else {\n    persons.sort((a, b) => {\n      switch (target.innerText) {\n        case 'Age':\n          return +b.children[target.cellIndex].innerText\n            - +a.children[target.cellIndex].innerText;\n\n        case 'Salary':\n          return trimmer(b.children[target.cellIndex].innerText)\n            - trimmer(a.children[target.cellIndex].innerText);\n\n        default:\n          return b.children[target.cellIndex].innerText\n            .localeCompare(a.children[target.cellIndex].innerText);\n      }\n    });\n\n    cleaner(document.querySelectorAll('th'), 'data-sorted');\n\n    target.dataset.sorted = 'DESC';\n  };\n\n  table.append(...persons);\n});\n\n// selection of the row\n\ntable.addEventListener('click', e => {\n  const toSelect = e.target.parentElement;\n\n  for (const row of table.rows) {\n    row.classList.remove('active');\n  }\n\n  toSelect.className = 'active';\n});\n\n// add a form\n\nconst form = document.createElement('form');\n\nform.classList.add('new-employee-form');\n\ndocument.body.append(form);\n\nform.insertAdjacentHTML('afterbegin', `\n  <label>Name:\n    <input \n      name=\"name\" \n      type=\"text\" \n      data-qa=\"name\" \n      required\n    >\n  </label>\n\n  <label>Position:\n    <input \n      name=\"position\" \n      type=\"text\" \n      data-qa=\"position\" \n      required\n    >\n  </label>\n\n  <label>Office:\n    <select\n      name=\"office\" \n      data-qa=\"office\" \n      required\n    >\n      ${options};\n    </select>\n  </label>\n\n  <label>Age:\n    <input \n      name=\"age\" \n      type=\"number\" \n      data-qa=\"age\"\n      required\n    >\n  </label>\n\n  <label>Salary:\n    <input \n      name=\"salary\" \n      type=\"number\" \n      data-qa=\"salary\" \n      required\n    >\n  </label>\n\n  <button>Save to table</button>\n`);\n\n// notification\n\nconst pushNotification = (title, description, type) => {\n  const element = document.createElement('div');\n  const elTitle = document.createElement('h2');\n  const elPar = document.createElement('p');\n\n  element.classList.add(type, 'notification');\n  element.dataset.qa = 'notification';\n\n  elTitle.classList.add('title');\n  elTitle.innerHTML = title;\n\n  elPar.innerHTML = description;\n\n  element.append(elTitle, elPar);\n\n  document.body.append(element);\n\n  setTimeout(() => {\n    element.remove();\n  }, 3000);\n};\n\nconst inputs = form.querySelectorAll('input');\nconst button = form.querySelector('button');\nconst nameField = form.querySelector('[name=\"name\"]');\nconst position = form.querySelector('[name=\"position\" ]');\nconst office = form.querySelector('[name=\"office\"]');\nconst age = form.querySelector('[name=\"age\"]');\nconst salary = form.querySelector('[name=\"salary\"]');\n\nbutton.addEventListener('click', e => {\n  const notification = document.body.querySelector('.notification');\n\n  e.preventDefault();\n\n  if (document.body.contains(notification)) {\n    notification.remove();\n  };\n\n  for (const input of inputs) {\n    if (!input.value) {\n      pushNotification('Error', 'Fill all the inputs', 'error');\n\n      return;\n    }\n  }\n\n  if (nameField.value.length < 4 || position.value.length < 4) {\n    pushNotification('Error', 'Min. length is 4 letters', 'error');\n\n    return;\n  };\n\n  if (!isNaN(nameField.value)) {\n    pushNotification('Error', 'Name mustn`t be a number', 'error');\n\n    return;\n  };\n\n  if (!isNaN(position.value)) {\n    pushNotification('Error', 'Position mustn`t be a number', 'error');\n\n    return;\n  };\n\n  if (age.value < 18 || age.value > 90) {\n    pushNotification('Error', 'Age should be from 18 to 90', 'error');\n\n    return;\n  };\n\n  // add tr\n\n  table.insertAdjacentHTML('beforeend', `\n  <tr>\n    <td>${nameField.value}</td>\n    <td>${position.value}</td>\n    <td>${office.value}</td>\n    <td>${age.value}</td>\n    <td>$${(+salary.value).toLocaleString('en-US')}</td>\n  </tr>\n  `);\n\n  persons.push(table.rows[table.rows.length - 1]);\n\n  for (const input of inputs) {\n    input.value = null;\n  }\n\n  pushNotification('Success', 'New employee was added', 'success');\n});\n\n// editing on double-click\n\ntable.addEventListener('dblclick', e => {\n  if (e.target.tagName !== 'TD') {\n    return;\n  };\n\n  if (table.querySelectorAll('.cell-input').length >= 1) {\n    return;\n  }\n\n  const cellText = e.target.textContent;\n  const newInput = e.target.cellIndex === 2\n    ? document.createElement('select')\n    : document.createElement('input');\n\n  if (newInput.tagName === 'SELECT') {\n    newInput.insertAdjacentHTML('afterbegin', options);\n  };\n\n  newInput.value = cellText;\n  newInput.classList.add('cell-input');\n\n  e.target.firstChild.replaceWith(newInput);\n\n  const checker = function() {\n    const notification = document.body.querySelector('.notification');\n\n    if (document.body.contains(notification)) {\n      notification.remove();\n    };\n\n    if (e.target.cellIndex === 0 || e.target.cellIndex === 1) {\n      if (newInput.value.length < 4) {\n        newInput.replaceWith(cellText);\n\n        pushNotification('Error', 'Min. length is 4 letters', 'error');\n      };\n\n      if (newInput.value && !isNaN(newInput.value)) {\n        newInput.replaceWith(cellText);\n\n        pushNotification('Error', 'Mustn`t be a number', 'error');\n      };\n    };\n\n    if (e.target.cellIndex === 3) {\n      if (isNaN(newInput.value)) {\n        newInput.replaceWith(cellText);\n\n        pushNotification('Erorr', 'Please, enter the number', 'error');\n      };\n\n      if (newInput.value < 18 || newInput.value > 90) {\n        newInput.replaceWith(cellText);\n\n        pushNotification('Erorr', 'Age only from 18 to 90', 'error');\n      }\n    };\n\n    if (e.target.cellIndex === 4) {\n      if (isNaN(newInput.value)) {\n        newInput.replaceWith(cellText);\n\n        pushNotification('Erorr', 'Only numbers please', 'error');\n      }\n\n      newInput.replaceWith(`$${(+newInput.value).toLocaleString('en-US')}`);\n    };\n\n    newInput.replaceWith(newInput.value);\n  };\n\n  newInput.addEventListener('blur', () => {\n    checker();\n  });\n\n  newInput.addEventListener('keydown', ev => {\n    if (ev.code === 'Enter') {\n      checker();\n    }\n  });\n});\n"]}